<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GastroLink - Confirm Order</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="{% static 'images/GASTRO_LINK-.png' %}" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="{% static 'styles/client/confirm.css' %}" rel="stylesheet">
    
</head>
<body>

<div class="container mt-2">
    <div class="card">

        <div class="icon-title">
            <i class="bi bi-basket"></i>
            <h4 class="mb-0">Order Summary</h4>
        </div>

        <ul class="list-group mb-3">
            {% for item in order.orderdish_set.all %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div><i class="bi bi-egg-fried me-2 text-primary"></i>{{ item.dish.name }} (x{{ item.quantity }})</div>
                    <span class="text-muted">DA{{ item.dish.price|floatformat:2 }}</span>
                </li>
            {% endfor %}
        </ul>

        <p class="info-label"><i class="bi bi-shop-window me-2 text-success"></i><strong>Restaurant:</strong> {{ order.restaurant.name }}</p>
        <p class="info-label"><i class="bi bi-calendar-check me-2 text-danger"></i><strong>Order Date:</strong> {{ order.order_date|date:"M d, Y H:i" }}</p>

        <div class="icon-title mt-4">
            <i class="bi bi-info-circle"></i>
            <h4 class="mb-0">Order Details</h4>
        </div>

        <form method="post">
            {% csrf_token %}

            <div class="mb-3">
                <label for="mode" class="form-label"><i class="bi bi-truck me-2 text-primary"></i>Order Mode</label>
                <select class="form-select" name="mode" id="mode" required>
                    <option value="">Select mode...</option>
                    <option value="served">ğŸ½ï¸ Served (Dine-in)</option>
                    <option value="delivered">ğŸšš Delivered (Home delivery)</option>
                    <option value="take-away">ğŸ¥¡ Take-away (Pickup)</option>
                </select>
            </div>

            <div class="mb-3" id="delivery-address-group">
                <label for="address" class="form-label"><i class="bi bi-geo-alt me-2 text-danger"></i>Delivery Address</label>
                <textarea class="form-control" name="address" id="address" rows="3" placeholder="Enter delivery address..."></textarea>
            </div>

            <div class="mb-3" id="table-number-group">
                <label for="table_number" class="form-label"><i class="bi bi-grid-3x3-gap me-2 text-info"></i>Table Number</label>
                <input type="number" class="form-control" name="table_number" id="table_number" min="1" placeholder="Enter your table number">
            </div>

            <button type="submit" class="btn btn-gradient w-100 mt-3"><i class="bi bi-check-circle me-2"></i>Confirm Order</button>
        </form>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#mode').change(function () {
            const mode = $(this).val();

            if (mode === 'delivered') {
                $('#delivery-address-group').slideDown();
                $('#address').prop('required', true);
            } else {
                $('#delivery-address-group').slideUp();
                $('#address').prop('required', false);
            }

            if (mode === 'served') {
                $('#table-number-group').slideDown();
                $('#table_number').prop('required', true);
            } else {
                $('#table-number-group').slideUp();
                $('#table_number').prop('required', false);
            }
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
