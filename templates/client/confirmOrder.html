{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GastroLink</title>
    <link rel="icon" href="{% static 'images/GASTRO_LINK-.png' %}" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'styles/client/confirm.css' %}" rel="stylesheet">
</head>
<body>

<div class="container mt-5">

    <h4>Order Summary</h4>
    <ul class="list-group mb-3">
        {% for item in order.orderdish_set.all %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ item.dish.name }} (x{{ item.quantity }})
                <span>${{ item.dish.price|floatformat:2 }} each</span>
            </li>
        {% endfor %}
    </ul>

    <p><strong>Restaurant:</strong> {{ order.restaurant.name }}</p>
    <p><strong>Order Date:</strong> {{ order.order_date|date:"M d, Y H:i" }}</p>

    <h4 class="mt-4">Order Details</h4>
    <form method="post">
        {% csrf_token %}

        <div class="mb-3">
            <label for="mode" class="form-label">Order Mode</label>
            <select class="form-select" name="mode" id="mode" required>
                <option value="">Select mode...</option>
                <option value="served">Served (Dine-in)</option>
                <option value="delivered">Delivered (Home delivery)</option>
                <option value="take-away">Take-away (Pickup)</option>
            </select>
        </div>

        <div class="mb-3" id="delivery-address-group" style="display: none;">
            <label for="address" class="form-label">Delivery Address</label>
            <textarea class="form-control" name="address" id="address" rows="3" placeholder="Enter delivery address..."></textarea>
        </div>
        <div class="mb-3" id="table-number-group" style="display: none;">
            <label for="table_number" class="form-label">Table Number</label>
            <input type="number" class="form-control" name="table_number" id="table_number" min="1" placeholder="Enter your table number">
        </div>
        

        <button type="submit" class="btn btn-primary w-100">Confirm Order</button>
    </form>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#mode').change(function() {
            const mode = $(this).val();
    
            if (mode === 'delivered') {
                $('#delivery-address-group').slideDown();
                $('#address').prop('required', true);
            } else {
                $('#delivery-address-group').slideUp();
                $('#address').prop('required', false);
            }
    
            if (mode === 'served') {
                $('#table-number-group').slideDown();
                $('#table_number').prop('required', true);
            } else {
                $('#table-number-group').slideUp();
                $('#table_number').prop('required', false);
            }
        });
    });
</script>
    
    
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
